<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Scaling | Puzzle Social</title>
    <meta name="description" content="Documentation">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/assets/style.DzeqEvMz.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.CKHkjn_m.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.HzTJgZjO.js">
    <link rel="modulepreload" href="/assets/chunks/framework.nlCHK0Xf.js">
    <link rel="modulepreload" href="/assets/scaling.md.D9xkeUZl.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-39b851b6><!--[--><!--]--><!--[--><span tabindex="-1" data-v-a06310ac></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-a06310ac> Skip to content </a><!--]--><!----><header class="VPNav" data-v-39b851b6 data-v-1125fe0e><div class="VPNavBar" data-v-1125fe0e data-v-8c74a6bf><div class="wrapper" data-v-8c74a6bf><div class="container" data-v-8c74a6bf><div class="title" data-v-8c74a6bf><div class="VPNavBarTitle has-sidebar" data-v-8c74a6bf data-v-91ea8bb2><a class="title" href="/" data-v-91ea8bb2><!--[--><!--]--><!--[--><img class="VPImage logo" src="/puzzles.png" alt data-v-e838cdb3><!--]--><span data-v-91ea8bb2>Puzzle Social</span><!--[--><!--]--></a></div></div><div class="content" data-v-8c74a6bf><div class="content-body" data-v-8c74a6bf><!--[--><!--]--><div class="VPNavBarSearch search" data-v-8c74a6bf><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-8c74a6bf data-v-d62dda7e><span id="main-nav-aria-label" class="visually-hidden" data-v-d62dda7e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-d62dda7e data-v-f334ebb6><!--[--><span data-v-f334ebb6>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/about.html" tabindex="0" data-v-d62dda7e data-v-f334ebb6><!--[--><span data-v-f334ebb6>About</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-8c74a6bf data-v-407d5c63><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-407d5c63 data-v-2994eab3 data-v-2ed556eb><span class="check" data-v-2ed556eb><span class="icon" data-v-2ed556eb><!--[--><span class="vpi-sun sun" data-v-2994eab3></span><span class="vpi-moon moon" data-v-2994eab3></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-8c74a6bf data-v-05a069e5 data-v-b299d3ce><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ever-mira/puzzle-social" aria-label="github" target="_blank" rel="noopener" data-v-b299d3ce data-v-1dde8092><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-8c74a6bf data-v-d10923a3 data-v-f1cced18><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-f1cced18><span class="vpi-more-horizontal icon" data-v-f1cced18></span></button><div class="menu" data-v-f1cced18><div class="VPMenu" data-v-f1cced18 data-v-b71e5dd0><!----><!--[--><!--[--><!----><div class="group" data-v-d10923a3><div class="item appearance" data-v-d10923a3><p class="label" data-v-d10923a3>Appearance</p><div class="appearance-action" data-v-d10923a3><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-d10923a3 data-v-2994eab3 data-v-2ed556eb><span class="check" data-v-2ed556eb><span class="icon" data-v-2ed556eb><!--[--><span class="vpi-sun sun" data-v-2994eab3></span><span class="vpi-moon moon" data-v-2994eab3></span><!--]--></span></span></button></div></div></div><div class="group" data-v-d10923a3><div class="item social-links" data-v-d10923a3><div class="VPSocialLinks social-links-list" data-v-d10923a3 data-v-b299d3ce><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ever-mira/puzzle-social" aria-label="github" target="_blank" rel="noopener" data-v-b299d3ce data-v-1dde8092><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-8c74a6bf data-v-661d4f1a><span class="container" data-v-661d4f1a><span class="top" data-v-661d4f1a></span><span class="middle" data-v-661d4f1a></span><span class="bottom" data-v-661d4f1a></span></span></button></div></div></div></div><div class="divider" data-v-8c74a6bf><div class="divider-line" data-v-8c74a6bf></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-39b851b6 data-v-e758e1b7><div class="container" data-v-e758e1b7><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-e758e1b7><span class="vpi-align-left menu-icon" data-v-e758e1b7></span><span class="menu-text" data-v-e758e1b7>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-e758e1b7 data-v-ebf966df><button data-v-ebf966df>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-39b851b6 data-v-6b9869d7><div class="curtain" data-v-6b9869d7></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-6b9869d7><span class="visually-hidden" id="sidebar-aria-label" data-v-6b9869d7> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-71286ee5><section class="VPSidebarItem level-0" data-v-71286ee5 data-v-877bfe94><div class="item" role="button" tabindex="0" data-v-877bfe94><div class="indicator" data-v-877bfe94></div><h2 class="text" data-v-877bfe94>About</h2><!----></div><div class="items" data-v-877bfe94><!--[--><div class="VPSidebarItem level-1 is-link" data-v-877bfe94 data-v-877bfe94><div class="item" data-v-877bfe94><div class="indicator" data-v-877bfe94></div><a class="VPLink link link" href="/about.html" data-v-877bfe94><!--[--><p class="text" data-v-877bfe94>Introduction</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-71286ee5><section class="VPSidebarItem level-0" data-v-71286ee5 data-v-877bfe94><div class="item" role="button" tabindex="0" data-v-877bfe94><div class="indicator" data-v-877bfe94></div><h2 class="text" data-v-877bfe94>Development</h2><!----></div><div class="items" data-v-877bfe94><!--[--><div class="VPSidebarItem level-1 is-link" data-v-877bfe94 data-v-877bfe94><div class="item" data-v-877bfe94><div class="indicator" data-v-877bfe94></div><a class="VPLink link link" href="/overview.html" data-v-877bfe94><!--[--><p class="text" data-v-877bfe94>Overview</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-877bfe94 data-v-877bfe94><div class="item" data-v-877bfe94><div class="indicator" data-v-877bfe94></div><a class="VPLink link link" href="/getting-started.html" data-v-877bfe94><!--[--><p class="text" data-v-877bfe94>Getting Started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-877bfe94 data-v-877bfe94><div class="item" data-v-877bfe94><div class="indicator" data-v-877bfe94></div><a class="VPLink link link" href="/technology.html" data-v-877bfe94><!--[--><p class="text" data-v-877bfe94>Technology</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-877bfe94 data-v-877bfe94><div class="item" data-v-877bfe94><div class="indicator" data-v-877bfe94></div><a class="VPLink link link" href="/code.html" data-v-877bfe94><!--[--><p class="text" data-v-877bfe94>Code</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-71286ee5><section class="VPSidebarItem level-0" data-v-71286ee5 data-v-877bfe94><div class="item" role="button" tabindex="0" data-v-877bfe94><div class="indicator" data-v-877bfe94></div><h2 class="text" data-v-877bfe94>Deployment</h2><!----></div><div class="items" data-v-877bfe94><!--[--><div class="VPSidebarItem level-1 is-link" data-v-877bfe94 data-v-877bfe94><div class="item" data-v-877bfe94><div class="indicator" data-v-877bfe94></div><a class="VPLink link link" href="/deployment.html" data-v-877bfe94><!--[--><p class="text" data-v-877bfe94>Overview</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-71286ee5><section class="VPSidebarItem level-0 has-active" data-v-71286ee5 data-v-877bfe94><div class="item" role="button" tabindex="0" data-v-877bfe94><div class="indicator" data-v-877bfe94></div><h2 class="text" data-v-877bfe94>Scaling</h2><!----></div><div class="items" data-v-877bfe94><!--[--><div class="VPSidebarItem level-1 is-link" data-v-877bfe94 data-v-877bfe94><div class="item" data-v-877bfe94><div class="indicator" data-v-877bfe94></div><a class="VPLink link link" href="/scaling.html" data-v-877bfe94><!--[--><p class="text" data-v-877bfe94>Overview</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-71286ee5><section class="VPSidebarItem level-0" data-v-71286ee5 data-v-877bfe94><div class="item" role="button" tabindex="0" data-v-877bfe94><div class="indicator" data-v-877bfe94></div><h2 class="text" data-v-877bfe94>Documentation</h2><!----></div><div class="items" data-v-877bfe94><!--[--><div class="VPSidebarItem level-1 is-link" data-v-877bfe94 data-v-877bfe94><div class="item" data-v-877bfe94><div class="indicator" data-v-877bfe94></div><a class="VPLink link link" href="/documentation.html" data-v-877bfe94><!--[--><p class="text" data-v-877bfe94>Overview</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-71286ee5><section class="VPSidebarItem level-0" data-v-71286ee5 data-v-877bfe94><div class="item" role="button" tabindex="0" data-v-877bfe94><div class="indicator" data-v-877bfe94></div><h2 class="text" data-v-877bfe94>Vision</h2><!----></div><div class="items" data-v-877bfe94><!--[--><div class="VPSidebarItem level-1 is-link" data-v-877bfe94 data-v-877bfe94><div class="item" data-v-877bfe94><div class="indicator" data-v-877bfe94></div><a class="VPLink link link" href="/vision.html" data-v-877bfe94><!--[--><p class="text" data-v-877bfe94>Overview</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-39b851b6 data-v-cc09d6e0><div class="VPDoc has-sidebar has-aside" data-v-cc09d6e0 data-v-f87ade32><!--[--><!--]--><div class="container" data-v-f87ade32><div class="aside" data-v-f87ade32><div class="aside-curtain" data-v-f87ade32></div><div class="aside-container" data-v-f87ade32><div class="aside-content" data-v-f87ade32><div class="VPDocAside" data-v-f87ade32 data-v-c0d770e2><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-c0d770e2 data-v-154faa32><div class="content" data-v-154faa32><div class="outline-marker" data-v-154faa32></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-154faa32>On this page</div><ul class="VPDocOutlineItem root" data-v-154faa32 data-v-a993366b><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-c0d770e2></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-f87ade32><div class="content-container" data-v-f87ade32><!--[--><!--]--><main class="main" data-v-f87ade32><div style="position:relative;" class="vp-doc _scaling" data-v-f87ade32><div><h1 id="scaling" tabindex="-1">Scaling <a class="header-anchor" href="#scaling" aria-label="Permalink to &quot;Scaling&quot;">​</a></h1><p>This page gives an overview of how the application can be scaled when the user-base grows significantly, focusing on strategies such as database optimization, load balancing, and horizontal scaling.</p><h2 id="nuxt" tabindex="-1">Nuxt <a class="header-anchor" href="#nuxt" aria-label="Permalink to &quot;Nuxt&quot;">​</a></h2><p>SSR and api-routes are scaled automatically by Cloudflare. New instances of our application are created automatically in areas, where high access rates are monitored. The code is run as near as possible at our users (&quot;on the edge&quot;), in over 400 locations worldwide:</p><p><a href="https://www.cloudflare.com/de-de/network/" target="_blank" rel="noreferrer">https://www.cloudflare.com/de-de/network/</a></p><h2 id="supabase" tabindex="-1">Supabase <a class="header-anchor" href="#supabase" aria-label="Permalink to &quot;Supabase&quot;">​</a></h2><p>The &quot;single source of truth&quot; for our data is stored in Supabase. Supabase allows to select the location, and currently this is &quot;Frankfurt am Main&quot;. To scale the application with a growing user base, there are several opportunities:</p><p>Create additional &quot;read-only instances (replicas) in areas with high access rates: most actions like clicking through profiles are &quot;read&quot; actions. Adding additional read-only nodes in areas with high access rates is easy, and takes a lot of load from the main database. Supabase allows us to do this through the Supabase-Dashboard.</p><p>For write actions it is more complicated, because concurrent actions can lead to conflicts and inconsistancy. There are advanced ways of solving these issues, but scaling for read is more than enough in the first stages of the project.</p><h2 id="caching" tabindex="-1">Caching <a class="header-anchor" href="#caching" aria-label="Permalink to &quot;Caching&quot;">​</a></h2><p>Caching data that is read often, but does not change often, is the preferred way of reducing the load on the database. Our application is run in Cloudflare Workers, and these workers allow our backend (&quot;api-routes&quot;) to store api-responses in the Cloudflare cache, so that we can response to requests with responses from the cache, instead of quering our database again. When a profile in the social network should go viral, for example in Berlin, the profile will automatically be stored in the cache in the datacenter near Berlin, and all subsequent requests will be served by the data from the cache, instead of going to the databse in Frankfurt again. This significatly improves the experience and speed for all ursers.</p><p>Depending on the case, we have to define how long a resource should be cached (for example one hour), or we can select a very long period of caching, and invalidate or update the cache, when a user (for example) is updating his/her profile.</p><h2 id="images" tabindex="-1">Images <a class="header-anchor" href="#images" aria-label="Permalink to &quot;Images&quot;">​</a></h2><p>All uploaded images are stored in the so called Supabase &quot;Bucket&quot;. Because this bucket is stored in a single location, we want to distribute it, to improve performance worldwide. For this reason, we use an &quot;image CDN&quot; (image contend delivery network). In our case, we are using the Cloudflare image CDN. Images are transformed to the size currently needed on the fly, to reduce the data that needs to be transferred. One image already transformed, is stored in the cloudflare cache, and is accessible worldwide.</p><p>This means, for a list of avatars for example, that is viewed by 100 people, we don&#39;t need to transfer each original (big) picture to each of these 100 persons. Instead, really small versions of the orgiginal pictures are created and sent around. Once these small versions are created, they are served from the cache for all subsequent requests. Bigger versions of a picture only have to be served, when a user clicks on a distinct profile.</p><p>This approch saves a lot of data and makes the whole network fast.</p><h2 id="next" tabindex="-1">Next <a class="header-anchor" href="#next" aria-label="Permalink to &quot;Next&quot;">​</a></h2><p>Read the next chapter, to learn about this documentaion.</p></div></div></main><footer class="VPDocFooter" data-v-f87ade32 data-v-a287ad5f><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-a287ad5f><span class="visually-hidden" id="doc-footer-aria-label" data-v-a287ad5f>Pager</span><div class="pager" data-v-a287ad5f><a class="VPLink link pager-link prev" href="/deployment.html" data-v-a287ad5f><!--[--><span class="desc" data-v-a287ad5f>Previous page</span><span class="title" data-v-a287ad5f>Overview</span><!--]--></a></div><div class="pager" data-v-a287ad5f><a class="VPLink link pager-link next" href="/documentation.html" data-v-a287ad5f><!--[--><span class="desc" data-v-a287ad5f>Next page</span><span class="title" data-v-a287ad5f>Overview</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"about.md\":\"DE8RqJZr\",\"code.md\":\"CggP-PTl\",\"deployment.md\":\"Cy3kxtdu\",\"documentation.md\":\"B1wdu_Nd\",\"getting-started.md\":\"DqfA1l7P\",\"index.md\":\"BMMUJNVi\",\"overview.md\":\"CvpkIX1d\",\"scaling.md\":\"D9xkeUZl\",\"technology.md\":\"wJYJFhFs\",\"vision.md\":\"CPAqMG8e\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Puzzle Social\",\"description\":\"Documentation\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"About\",\"link\":\"/about\"}],\"sidebar\":[{\"text\":\"About\",\"items\":[{\"text\":\"Introduction\",\"link\":\"/about\"}]},{\"text\":\"Development\",\"items\":[{\"text\":\"Overview\",\"link\":\"/overview\"},{\"text\":\"Getting Started\",\"link\":\"/getting-started\"},{\"text\":\"Technology\",\"link\":\"/technology\"},{\"text\":\"Code\",\"link\":\"/code\"}]},{\"text\":\"Deployment\",\"items\":[{\"text\":\"Overview\",\"link\":\"/deployment\"}]},{\"text\":\"Scaling\",\"items\":[{\"text\":\"Overview\",\"link\":\"/scaling\"}]},{\"text\":\"Documentation\",\"items\":[{\"text\":\"Overview\",\"link\":\"/documentation\"}]},{\"text\":\"Vision\",\"items\":[{\"text\":\"Overview\",\"link\":\"/vision\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/ever-mira/puzzle-social\"}],\"logo\":\"/puzzles.png\"},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>